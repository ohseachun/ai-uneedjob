/**
 * 웹 스크래핑 유틸리티 함수
 * 
 * 학습 목표:
 * 1. node-fetch를 이용한 HTTP 요청 처리
 * 2. HTML 파싱 및 텍스트 추출
 * 3. 정규표현식을 이용한 DOM 요소 추출
 * 4. 비동기 함수 처리 및 에러 핸들링
 * 5. 텍스트 전처리 (길이 제한, HTML 태그 제거)
 */

// node-fetch 모듈이 설치되어 있지 않거나 타입 선언이 없어서 발생하는 오류입니다.
// node-fetch를 설치하려면 터미널에서 다음 명령어를 실행하세요:
// npm install node-fetch
// 타입스크립트 타입이 필요하다면 다음도 실행하세요:
// npm install --save-dev @types/node-fetch

// ESM 환경에서는 import fetch from "node-fetch"; 대신 아래와 같이 사용해야 할 수도 있습니다:
// import fetch from "node-fetch";

// 또는 CommonJS 환경에서는:
// const fetch = require("node-fetch");

import fetch from "node-fetch";

/**
 * 웹페이지에서 텍스트를 추출하는 함수
 * @param url - 스크래핑할 웹페이지 URL
 * @returns 추출된 텍스트 (최대 5000자)
 */
export async function fetchProjectText() {
    // // 1단계: HTTP GET 요청으로 웹페이지 HTML 가져오기
    // const response = await fetch(url);

    // // 2단계: 응답을 텍스트로 변환
    // // response.text()는 Promise<string>을 반환하므로 await를 사용해야 합니다.
    // const html = await response.text();
    
    // // 3단계: 정규표현식으로 <body> 태그 내용 추출
    // // [\s\S]*? 에서 *?는 "비탐욕적"이라는 뜻인데, 
    // // 이는 가능한 한 짧게(최소한으로) 일치시키라는 의미야.
    // // 예를 들어, <body>와 </body> 사이에 여러 개의 </body>가 있을 때,
    // // *?를 쓰면 가장 가까운 </body>까지만 매칭해.
    // // 반대로 *만 쓰면(탐욕적), 가능한 한 많이(최대한 길게) 매칭해서 마지막 </body>까지 잡아버려.
    // // 즉, "비탐욕적"은 정규표현식이 최소한의 범위만 선택하도록 하는 방식이야.
    // const bodyMatch = html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);

    // // 4단계: HTML 태그 제거 및 텍스트 정리
    // // <[^>]+> 정규표현식으로 모든 HTML 태그 제거
    // const text = bodyMatch ? bodyMatch[1].replace(/<[^>]+>/g, '') : '';
    
    // // 5단계: 텍스트 정리 및 길이 제한
    // // trim(): 앞뒤 공백 제거
    // // slice(0, 5000): 최대 5000자로 제한 (토큰 제한 고려)
    // return text.trim().slice(0, 5000);

    return `
    [기획/12개월]전자계약 테스트 프로젝트

분 야 : 웹 기획자, 모바일 기획자

업무내용 : 전자계약 테스트 프로젝트/12개월/가산디지털/중급/400~450만원/3명/웹개발자
(우대사항: 금융권 or 대기업 프로젝트 수행이력 1~2회 이상)

기 간 : 2025년 04월 14일 ~ 2026년 04월 13일 (12개월/ 기간 협의 가능)

경 력 : 4년 ~ 8년 (중급)

인 원 : 3명 

급 여 : 월 400만원 ~ 450만원 (비용 협의 가능) 

위 치 : 가산디지털

파견일 : 2025년 04월 14일 (4월 중/하순 투입일 협의 가능)

현재 진행 상황 : 프로젝트 킥오프 예정이며 담당 기획자 구인 예정입니다.

*** 동료나 지인에게 소개해주셔도 좋을 듯 합니다.

지원가능한 분은 아래 프로젝트 참가 신청란에 지원해 주시고 사이트내 이력서&포트폴리오 업데이트 必 입니다.
사이트 지원 후 메일(jsk@uneedjob.co.kr)로 기획 포트폴리오 (스토리보드 or 제안서 샘플 또는 사이트 화면 캡처본 등)를 제출하시면 채택율은 더 높아집니다.

저희는 빠르게 추천에 나가는 편입니다.
미리미리 지원해두시면 다른 좋은 프로젝트 생길 시에도 연락 드립니다.

코멘트 : 계약사는 유명 에이전시 중의 한 곳으로 금융권 및 대기업 프로젝트를 주로 진행하는 곳입니다.
            이번 건은 대기업, 금융권 레퍼런스를 만들 수 있는 좋은 프로젝트가 될 것 같습니다.
            능력 있는 기획자 분들의 많은 지원 부탁 드립니다.
            파견비용은 경력에 따른 협의 가능합니다. 2025년 본인 매출을 위해 열심히 지원 하세요.^^

문의사항은 이메일 or 네이트온 or 문자로 연락 바랍니다.
프로젝트를 진정성 있게 진행하겠습니다.
감사합니다.

우수한 기업과 인재들의 컨넥션 플랫폼 - 유니드잡
====================================================
유니드잡 김지선 이사 | UNEEDJOB
Jisun Kim / jsk@uneedjob.co.kr
08-390 서울특별시 구로구 디지털로26길 111 JNK디지털타워 412호
TEL 02-6124-5877 / Mobile. 010-9707-6408
Fax 02-6937-1784/ Homepage http://www.Uneedjob.co.kr
====================================================
    `.trim();
}





